(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const g of c.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function r(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(n){if(n.ep)return;n.ep=!0;const c=r(n);fetch(n.href,c)}})();const d=[];for(let t=0;t<256;++t)d.push((t+256).toString(16).slice(1));function $(t,e=0){return(d[t[e+0]]+d[t[e+1]]+d[t[e+2]]+d[t[e+3]]+"-"+d[t[e+4]]+d[t[e+5]]+"-"+d[t[e+6]]+d[t[e+7]]+"-"+d[t[e+8]]+d[t[e+9]]+"-"+d[t[e+10]]+d[t[e+11]]+d[t[e+12]]+d[t[e+13]]+d[t[e+14]]+d[t[e+15]]).toLowerCase()}let E;const A=new Uint8Array(16);function I(){if(!E){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");E=crypto.getRandomValues.bind(crypto)}return E(A)}const j=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),w={randomUUID:j};function U(t,e,r){var n;if(w.randomUUID&&!t)return w.randomUUID();t=t||{};const o=t.random??((n=t.rng)==null?void 0:n.call(t))??I();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,$(o)}const B={"#a0c8ff":"Trabajo","#a8e5a4":"Personal","#f7919a":"Urgente","#c6a2f0":"Creativo","#ffeb99":"Ocio","#f3b3c1":"Estudio"};class O{constructor(e,r){this.id=U(),this.category=B[e],this.description=r,this.done=!1}}const M="To-Do-App",N=1,b={db:null},x=async()=>new Promise((t,e)=>{const r=indexedDB.open(M,N);r.onupgradeneeded=o=>{const c=o.target.result.createObjectStore("to-dos",{keyPath:"id",autoIncrement:!1});c.createIndex("category","category",{unique:!1}),c.createIndex("description","description",{unique:!1}),c.createIndex("done","done",{unique:!1})},r.onsuccess=o=>{b.db=o.target.result,t(b.db)},r.onerror=()=>{e("Error al abrir la base de datos")}}),H=async t=>(b.db||await x(),new Promise((e,r)=>{const c=b.db.transaction("to-dos","readwrite").objectStore("to-dos").add(t);c.onsuccess=()=>{e("To-do agregado correctamente")},c.onerror=g=>{r("No se pudo agregar el To-do")}})),R=async()=>(b.db||await x(),new Promise((t,e)=>{const n=b.db.transaction("to-dos","readonly").objectStore("to-dos").getAll();n.onsuccess=c=>{t(c.target.result)},n.onerror=c=>{e("No se pudieron obtener los to-dos")}})),V=async t=>(b.db||await x(),new Promise((e,r)=>{const c=b.db.transaction("to-dos","readwrite").objectStore("to-dos").delete(t);c.onsuccess=()=>{e("To-do eliminado correctamente")},c.onerror=g=>{r("No se pudo eliminar el To-do")}})),z=async(t,e)=>(b.db||await x(),new Promise((r,o)=>{const c=b.db.transaction("to-dos","readwrite").objectStore("to-dos"),g=c.get(t);g.onsuccess=a=>{const s=a.target.result;if(s){const i={...s,...e},u=c.put(i);u.onsuccess=()=>r("To-do actualizado correctamente"),u.onerror=k=>o("No se pudo actualizar el to-do")}else o("Gasto no encontrado")},g.onerror=a=>{o("Error al obtener el to-do para actualizar")}})),m={openDB:x,saveTodoDB:H,getTodosDB:R,deleteTodoDB:V,updateTodoDB:z},f={All:"all",Completed:"Completed",Pending:"Pending"},p={todos:[],statusFilter:f.All,categoryFilter:f.All},G=async()=>{await m.openDB(),await D()},D=async()=>{try{const t=await m.getTodosDB();if(t.length===0)return;t.forEach(e=>{const{id:r,category:o,description:n,done:c}=e;p.todos.push({id:r,category:o,description:n,done:c})})}catch(t){console.error("Error al cargar los todos desde IndexedDB:",t)}},K=async(t,e)=>{if(!t)throw new Error("Categoria no valida");if(!e)throw new Error("Descripcion no valida");const r=new O(t,e);p.todos.push(r),await m.saveTodoDB(r)},Q=async t=>{const e=p.todos.find(r=>r.id===t);e&&(e.done=!e.done,await m.updateTodoDB(e.id,{done:e.done}))},X=async t=>{p.todos=p.todos.filter(e=>e.id!==t),await m.deleteTodoDB(t)},J=async(t,e,r)=>{e==="#a0c8ff"?e="Trabajo":e==="#a8e5a4"?e="Personal":e==="#f7919a"?e="Urgente":e==="#c6a2f0"?e="Creativo":e==="#ffeb99"?e="Ocio":e==="#f3b3c1"&&(e="Estudio");const o=p.todos.findIndex(n=>n.id===t);p.todos[o].category=e,p.todos[o].description=r,await m.updateTodoDB(t,{category:e,description:r})},W=async()=>{const t=p.todos.filter(e=>e.done);p.todos=p.todos.filter(e=>!e.done);for(const e of t)await m.deleteTodoDB(e.id)},Y=(t=f.All,e=f.All)=>p.todos.filter(r=>{const o=t===f.All||t===f.Completed&&r.done||t===f.Pending&&!r.done,n=e===f.All||r.category===e;return o&&n}),Z=(t=f.All,e=f.All)=>{p.statusFilter=t,p.categoryFilter=e},_=()=>({statusFilter:p.statusFilter,categoryFilter:p.categoryFilter}),l={initStore:G,loadStore:D,addTodo:K,toggleTodo:Q,deleteTodo:X,deleteCompleted:W,setFilter:Z,getCurrentFilter:_,getTodos:Y,editTodo:J},ee=`<div class="layout">\r
\r
    <div class="container">\r
\r
\r
    </div>\r
\r
</div>`,te=`<footer>\r
    <div id="filter">\r
      <select class="btnFilter-category" id="category">\r
        <option value="all" style="background-color: #c6cacf; color: black;" selected>Sin filtro</option>\r
        <option value="Trabajo" style="background-color: #a0c8ff; color: black;">Trabajo</option>\r
        <option value="Personal" style="background-color: #a8e5a4; color: black;">Personal</option>\r
        <option value="Urgente" style="background-color: #f7919a; color: black;">Urgente</option>\r
        <option value="Creativo" style="background-color: #c6a2f0; color: black;">Creativo</option>\r
        <option value="Ocio" style="background-color: #ffeb99; color: black;">Ocio</option>\r
        <option value="Estudio" style="background-color: #f3b3c1; color: black;">Estudio</option>\r
      </select>\r
      <button id="filters" value="all" class="btnFilter-all">Filtrar Todos</button>\r
      <button id="filters" value="Pending" class="btnFilter">Filtrar Pendientes</button>\r
      <button id="filters" value="Completed" class="btnFilter-completed">Filtrar Completados</button>\r
      <button class="btnFilter-delete">Eliminar Completados</button>\r
    </div>\r
\r
  </footer>\r
  <p class="copy">Copyright © 2025 MDeosdad</p>`,oe=t=>{const e=document.createElement("div");e.innerHTML=te,t.append(e)},re=`<header>\r
    <h1>To-Do</h1>\r
  </header>\r
\r
  <form action="#">\r
    <div class="triangulo-derecha"></div>\r
\r
    <select title="Selecciona una categoria" id="color-picker">\r
      <option id="#a0c8ff" value="#a0c8ff" style="background-color: #a0c8ff; color: black;">Trabajo</option>\r
      <option id="#a8e5a4" value="#a8e5a4" style="background-color: #a8e5a4; color: black;" selected="selected">Personal</option>\r
      <option id="#f7919a" value="#f7919a" style="background-color: #f7919a; color: black;">Urgente</option>\r
      <option id="#c6a2f0" value="#c6a2f0" style="background-color: #c6a2f0; color: black;">Creativo</option>\r
      <option id="#ffeb99" value="#ffeb99" style="background-color: #ffeb99; color: black;">Ocio</option>\r
      <option id="#f3b3c1" value="#f3b3c1" style="background-color: #f3b3c1; color: black;">Estudio</option>\r
    </select>\r
    <input type="text" name="todo" id="todo-input" placeholder="¿Qué tienes que hacer?">\r
  </form>`;function F(t,e){const{header:r,colorPicker:o,input:n}=e;r&&(r.style.textShadow=`4px 4px 0px ${t}`),o&&(o.style.backgroundColor=t),n&&(n.style.boxShadow=`6px 6px 0px -1px ${t}`),n&&(n.style.outlineColor=t)}function ne(t){const{colorPicker:e}=t;let r=e.value;F(r,t),e.addEventListener("change",function(){r=this.value,F(r,t)})}const ce=t=>{const e=document.createElement("div");e.innerHTML=re,t.append(e);const r={colorPicker:document.querySelector("#color-picker"),header:document.querySelector("header h1"),input:document.querySelector("#todo-input")};ne(r)},ae=`<div class="content" id="todos">\r
\r
\r
</div>`,se=t=>{const e=document.createElement("div");e.innerHTML=ae,t.append(e)},le=t=>({all:"#f5f5f5",Trabajo:"#a0c8ff",Personal:"#a8e5a4",Urgente:"#f7919a",Creativo:"#c6a2f0",Ocio:"#ffeb99",Estudio:"#f3b3c1"})[t]||"#f5f5f5",de=()=>{const t=document.querySelectorAll("#toggle-todo"),e=l.getTodos();t.forEach(function(o){const n=o.closest("#todo"),c=n.querySelector("#todo-txt"),g=n.querySelector("#color-box-todo"),a=o.dataset.id,s=e.find(i=>i.id===a);if(s&&s.done){const i=window.getComputedStyle(g).backgroundColor,u=r(i);c.style.textDecoration=`line-through 4px ${u}`,o.style.color=u,o.checked=!0}o.addEventListener("change",function(){const i=window.getComputedStyle(g).backgroundColor;if(this.checked){const u=r(i);c.style.textDecoration=`line-through 4px ${u}`,o.style.color=u,l.toggleTodo(a),y()}else c.style.textDecoration="none",o.style.color="",l.toggleTodo(a),y()})});function r(o){const n=o.match(/\d+/g);return`#${(1<<24|parseInt(n[0])<<16|parseInt(n[1])<<8|parseInt(n[2])).toString(16).slice(1).toUpperCase()}`}};let h;const ie=(t,e=[])=>{let r;if(h||(h=document.querySelector(t)),!h)throw new Error(`Element: ${t} no existe`);h.innerHTML="",e.forEach(o=>{o.category==="Trabajo"?r="#a0c8ff":o.category==="Personal"?r="#a8e5a4":o.category==="Urgente"?r="#f7919a":o.category==="Creativo"?r="#c6a2f0":o.category==="Ocio"?r="#ffeb99":o.category==="Estudio"&&(r="#f3b3c1");const n=document.createElement("DIV");n.id="todo",n.dataset.id=o.id,n.innerHTML=`
            <div class="triangulo-derecha-todo"></div>
            <div class="color-category-${o.id}"id="color-box-todo" value="${r}" style="background-color: ${r};"></div>
            <p class="color-input-${o.id}"id="todo-txt" style="box-shadow: ${r} 6px 6px 0px -1px;">${o.description}</p>
            <div id="selectors">
                <input class="color-toggle-${o.id}"style="box-shadow: ${r} 4px 2px 0px 0px;" id="toggle-todo" title="Marcar como acabado" class="toggle-todo" type="checkbox" data-id="${o.id}" ${o.done?"checked":""}>
                <button class="color-edit-${o.id}"style="box-shadow: ${r} 4px 2px 0px 0px;" id="toggle-edit" title="Editar To-Do" class="toggle-todo"
                    type="button" data-id="${o.id}">E</button>
                <button class="color-delete-${o.id}"style="box-shadow: ${r} 4px 2px 0px 0px;" id="toggle-delete" title="Eliminar To-Do" class="toggle-todo"
                type="button" data-id="${o.id}">X</button>
            </div>
        `,h.appendChild(n)}),de()},T={TodoList:"#todos",inputTodo:"#todo-input"},y=()=>{const{statusFilter:t,categoryFilter:e}=l.getCurrentFilter(),r=l.getTodos(t,e);ie(T.TodoList,r)},ue=t=>{let e=null;(()=>{const a=document.createElement("div");a.innerHTML=ee,t.append(a);const s=a.querySelector(".container");ce(s),se(s),oe(s),y()})();const r=app.querySelector(T.inputTodo),o=document.querySelector(T.TodoList);r.addEventListener("keydown",a=>{if(a.key!=="Enter"||a.target.value.trim().length===0)return;a.preventDefault();const s=a.target.parentElement.children[1].value,i=a.target.value;if(e){const u=a.target.parentElement.children[1].value;l.editTodo(e,u,i),e=null}else l.addTodo(s,i);y(),a.target.value=""}),o.addEventListener("click",a=>{a.target.id==="toggle-delete"&&(l.deleteTodo(a.target.dataset.id),y())}),o.addEventListener("click",a=>{if(a.target.id==="toggle-edit"){const s=a.target.dataset.id,i=a.target.parentElement.parentElement.children[2].textContent,u=a.target.parentElement.parentElement.children[1].getAttribute("value");document.querySelector(T.inputTodo).value=i;const k=document.querySelector("#color-picker"),S=k.querySelectorAll("option");S.forEach(v=>{v.removeAttribute("selected")}),S.forEach((v,P)=>{v.value===u&&(v.setAttribute("selected","selected"),k.selectedIndex=P)});const q=document.querySelector("header > h1"),C=document.querySelector("#todo-input"),L=document.querySelector("#color-picker");q.style.textShadow=`4px 4px 0px ${u}`,C.style.boxShadow=`6px 6px 0px -1px ${u}`,C.style.outlineColor=u,L.style.backgroundColor=u,e=s}});const n=document.querySelector("#category"),c=document.querySelectorAll("#filters"),g=document.querySelector(".btnFilter-delete");c.forEach(a=>{a.addEventListener("click",s=>{switch(c.forEach(i=>i.classList.remove("click")),s.target.classList.add("click"),s.target.value){case"Completed":l.setFilter(f.Completed,l.getCurrentFilter().categoryFilter);break;case"Pending":l.setFilter(f.Pending,l.getCurrentFilter().categoryFilter);break;case"all":l.setFilter(f.All,l.getCurrentFilter().categoryFilter)}y()})}),g.addEventListener("click",a=>{a.target.classList.add("click"),l.deleteCompleted(),y(),setTimeout(()=>{a.target.classList.remove("click")},50)}),n.addEventListener("change",a=>{const s=a.target.value,i=le(s);l.setFilter(l.getCurrentFilter().statusFilter,s),y(),a.target.style.backgroundColor=i})};async function pe(){await l.initStore();const t=document.querySelector("#app");ue(t)}pe();
